# HealthCoachAI Backend Environment Configuration
# Copy this file to .env and fill in the actual values
# NEVER commit the actual .env file to version control

# =============================================================================
# Core Application Settings
# =============================================================================

NODE_ENV=development
PORT=8080
API_BASE_URL=http://localhost:8080
APP_ORIGIN=http://localhost:3000

# Application Name and Version
APP_NAME=HealthCoachAI
APP_VERSION=1.0.0

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL Database
POSTGRES_URL=postgresql://user:password@localhost:5432/healthcoachai
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=user
POSTGRES_PASSWORD=password
POSTGRES_DB=healthcoachai

# Database Pool Settings
POSTGRES_POOL_MIN=2
POSTGRES_POOL_MAX=10
POSTGRES_POOL_IDLE_TIMEOUT=30000

# Redis Cache
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis Connection Pool
REDIS_POOL_MAX=10
REDIS_POOL_MIN=2

# =============================================================================
# Object Storage Configuration
# =============================================================================

# S3-Compatible Storage (MinIO for local development)
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=healthcoachai
S3_ACCESS_KEY=localdev
S3_SECRET_KEY=localdev
S3_REGION=us-east-1
S3_FORCE_PATH_STYLE=true

# File Upload Limits
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,gif

# =============================================================================
# Vector Store Configuration
# =============================================================================

# PostgreSQL with pgvector extension
PGVECTOR_ENABLED=true
VECTOR_DIMENSION=1536

# Alternative: OpenSearch/Elasticsearch
OPENSEARCH_ENABLED=false
OPENSEARCH_URL=https://localhost:9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=admin

# =============================================================================
# Authentication Configuration
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ACCESS_TTL=900          # 15 minutes
JWT_REFRESH_TTL=1209600     # 2 weeks
JWT_ISSUER=healthcoachai
JWT_AUDIENCE=healthcoachai-users

# Session Configuration
SESSION_SECRET=your-session-secret-change-this-in-production
SESSION_TTL=86400           # 24 hours

# Password Security
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8

# =============================================================================
# OAuth Configuration
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:8080/auth/google/callback

# Apple OAuth
APPLE_CLIENT_ID=your-apple-client-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY_B64=your-base64-encoded-apple-private-key
APPLE_CALLBACK_URL=http://localhost:8080/auth/apple/callback

# Facebook OAuth (optional)
FACEBOOK_CLIENT_ID=your-facebook-client-id
FACEBOOK_CLIENT_SECRET=your-facebook-client-secret
FACEBOOK_CALLBACK_URL=http://localhost:8080/auth/facebook/callback

# =============================================================================
# AI Providers & Policy Configuration
# =============================================================================

# AI Routing Configuration
AI_POLICY_LEVEL1_DAILY_TIERS=100,200,500
AI_POLICY_LEVEL2_ACCURACY_WINDOW=0.05
AI_VENDOR_LIST=openai,anthropic,vertex,openrouter,together

# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=your-openai-org-id
OPENAI_PROJECT_ID=your-openai-project-id

# Anthropic
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-key-here

# Google Vertex AI
GOOGLE_VERTEX_PROJECT=your-gcp-project-id
GOOGLE_VERTEX_LOCATION=us-central1
GOOGLE_APPLICATION_CREDENTIALS_B64=your-base64-encoded-service-account-json

# OpenRouter
OPENROUTER_API_KEY=sk-or-your-openrouter-key-here
OPENROUTER_APP_NAME=HealthCoachAI

# Together AI
TOGETHER_API_KEY=your-together-api-key-here

# AI Safety Settings
AI_ZERO_RETENTION=true
AI_MAX_TOKENS=4096
AI_TEMPERATURE=0.7
AI_TIMEOUT=30000  # 30 seconds

# =============================================================================
# OCR Providers Configuration
# =============================================================================

# Primary OCR Provider
OCR_PRIMARY=documentai

# Google Document AI
GOOGLE_DOCUMENT_AI_PROJECT=your-gcp-project-id
GOOGLE_DOCUMENT_AI_LOCATION=us
GOOGLE_DOCUMENT_AI_PROCESSOR_ID=your-processor-id

# AWS Textract
AWS_TEXTRACT_ACCESS_KEY_ID=your-aws-access-key
AWS_TEXTRACT_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_TEXTRACT_REGION=us-east-1

# Azure Form Recognizer
AZURE_FORM_RECOGNIZER_ENDPOINT=https://your-resource.cognitiveservices.azure.com/
AZURE_FORM_RECOGNIZER_KEY=your-azure-form-recognizer-key

# =============================================================================
# External Integrations
# =============================================================================

# Fitbit Integration
FITBIT_CLIENT_ID=your-fitbit-client-id
FITBIT_CLIENT_SECRET=your-fitbit-client-secret
FITBIT_CALLBACK_URL=http://localhost:8080/integrations/fitbit/callback

# Weather Provider
WEATHER_PROVIDER=openweather
OPENWEATHER_API_KEY=your-openweather-api-key

# AQI Provider
AQI_PROVIDER=iqair
IQAIR_API_KEY=your-iqair-api-key

# Nutrition Data Sources
USDA_API_KEY=your-usda-fdc-api-key
OPEN_FOOD_FACTS_API_URL=https://world.openfoodfacts.org/api/v0

# =============================================================================
# Communication Services
# =============================================================================

# Email Service (SendGrid)
SENDGRID_API_KEY=SG.your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@healthcoachai.com
SENDGRID_FROM_NAME=HealthCoachAI

# SMS Service (Twilio)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Push Notifications
FCM_SERVER_KEY=your-firebase-server-key
FCM_PROJECT_ID=your-firebase-project-id
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-apns-team-id
APNS_PRIVATE_KEY_B64=your-base64-encoded-apns-private-key

# =============================================================================
# Security Configuration
# =============================================================================

# CORS Settings
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW=900000    # 15 minutes
RATE_LIMIT_MAX=100          # requests per window
RATE_LIMIT_SKIP_SUCCESSFUL=false

# CSRF Protection
CSRF_SECRET=your-csrf-secret-change-this-in-production

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=/security/csp-report

# =============================================================================
# Monitoring and Observability
# =============================================================================

# Logging Configuration
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_FILE_ENABLED=false
LOG_FILE_PATH=logs/app.log

# OpenTelemetry
OTEL_ENABLED=true
OTEL_SERVICE_NAME=healthcoachai-backend
OTEL_SERVICE_VERSION=1.0.0
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_EXPORTER_OTLP_HEADERS=

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Error Tracking (Sentry)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Development Tools
# =============================================================================

# API Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs

# Development Features
HOT_RELOAD=true
DEBUG_MODE=true
VERBOSE_LOGGING=true

# Testing
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/healthcoachai_test
TEST_REDIS_URL=redis://localhost:6380

# =============================================================================
# Feature Flags
# =============================================================================

# Feature toggles for gradual rollout
FEATURE_CHAT_ENABLED=true
FEATURE_PHOTO_LOG_ENABLED=false
FEATURE_SOCIAL_LOGIN_ENABLED=true
FEATURE_OFFLINE_MODE_ENABLED=false
FEATURE_ANALYTICS_ENABLED=true

# =============================================================================
# Performance Configuration
# =============================================================================

# Caching
CACHE_TTL_DEFAULT=3600      # 1 hour
CACHE_TTL_USER_PROFILE=7200 # 2 hours
CACHE_TTL_NUTRITION_DATA=86400 # 24 hours

# Request Timeouts
REQUEST_TIMEOUT=30000       # 30 seconds
DATABASE_TIMEOUT=10000      # 10 seconds
EXTERNAL_API_TIMEOUT=15000  # 15 seconds

# Connection Limits
MAX_CONNECTIONS=100
MAX_REQUESTS_PER_CONNECTION=1000

# =============================================================================
# Backup and Maintenance
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *   # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=We are currently performing maintenance. Please try again later.