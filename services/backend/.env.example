# HealthCoachAI Backend Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# Core Application Settings
# =============================================================================

# Environment (development, staging, production)
NODE_ENV=development

# Server configuration
PORT=8080
API_BASE_URL=http://localhost:8080
APP_ORIGIN=http://localhost:3000

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL
POSTGRES_URL=postgresql://user:password@localhost:5432/healthcoachai
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=healthcoachai
POSTGRES_USER=user
POSTGRES_PASSWORD=password

# Redis Cache
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# =============================================================================
# Object Storage Configuration
# =============================================================================

# S3 Compatible Storage (AWS S3, MinIO, etc.)
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=healthcoachai
S3_ACCESS_KEY=localdev
S3_SECRET_KEY=localdev
S3_REGION=us-east-1
S3_FORCE_PATH_STYLE=true

# =============================================================================
# Vector Database Configuration
# =============================================================================

# pgvector (using PostgreSQL extension)
PGVECTOR_ENABLED=true

# Alternative: OpenSearch (if using instead of pgvector)
OPENSEARCH_ENDPOINT=
OPENSEARCH_USERNAME=
OPENSEARCH_PASSWORD=

# =============================================================================
# Authentication & Security
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters
JWT_ACCESS_TTL=900
JWT_REFRESH_TTL=1209600

# Encryption key for sensitive data (must be 32 characters)
ENCRYPTION_KEY=your-32-character-encryption-key

# Password hashing
BCRYPT_ROUNDS=12

# =============================================================================
# OAuth Providers
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Apple OAuth
APPLE_CLIENT_ID=
APPLE_TEAM_ID=
APPLE_KEY_ID=
APPLE_PRIVATE_KEY_B64=

# Facebook OAuth  
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=

# =============================================================================
# AI Providers & Policy Configuration
# =============================================================================

# AI Routing Policy
AI_POLICY_LEVEL1_DAILY_TIERS=100,200,500
AI_POLICY_LEVEL2_ACCURACY_WINDOW=0.05
AI_VENDOR_LIST=openai,anthropic,vertex,openrouter,together
AI_ZERO_RETENTION=true

# OpenAI
OPENAI_API_KEY=
OPENAI_ORG_ID=

# Anthropic
ANTHROPIC_API_KEY=

# Google Vertex AI
GOOGLE_VERTEX_PROJECT=
GOOGLE_VERTEX_LOCATION=
GOOGLE_APPLICATION_CREDENTIALS_B64=

# OpenRouter
OPENROUTER_API_KEY=

# Together AI
TOGETHER_API_KEY=

# =============================================================================
# OCR Providers
# =============================================================================

# Primary OCR Provider
OCR_PRIMARY=documentai

# Google Document AI
GOOGLE_APPLICATION_CREDENTIALS_B64=

# AWS Textract
AWS_TEXTRACT_ACCESS_KEY_ID=
AWS_TEXTRACT_SECRET_ACCESS_KEY=
AWS_TEXTRACT_REGION=

# =============================================================================
# External API Integrations
# =============================================================================

# USDA Food Data Central
USDA_FDC_API_KEY=

# Open Food Facts
OFF_USER_AGENT=HealthCoachAI/1.0

# Weather Services
WEATHER_PROVIDER=openweather
OPENWEATHER_API_KEY=

# Air Quality
AQI_PROVIDER=iqair
IQAIR_API_KEY=

# Fitbit Integration
FITBIT_CLIENT_ID=
FITBIT_CLIENT_SECRET=

# =============================================================================
# Notification Services
# =============================================================================

# Email (SMTP)
EMAIL_PROVIDER=smtp
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=

# SMS Provider
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# Push Notifications
# APNs (iOS)
APNS_KEY_ID=
APNS_TEAM_ID=
APNS_PRIVATE_KEY_B64=
APNS_BUNDLE_ID=com.healthcoachai.app

# FCM (Android)
FCM_SERVER_KEY=
FCM_PROJECT_ID=

# =============================================================================
# Monitoring & Observability
# =============================================================================

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=healthcoachai-backend
OTEL_RESOURCE_ATTRIBUTES=service.version=1.0.0

# Sentry Error Tracking
SENTRY_DSN=

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# =============================================================================
# Security Configuration
# =============================================================================

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=http://localhost:3000

# Helmet Security Headers
HELMET_ENABLED=true

# =============================================================================
# Feature Flags
# =============================================================================

# Feature toggles
FEATURE_AI_ROUTING=true
FEATURE_HEALTH_REPORTS=true
FEATURE_CHAT_ENABLED=true
FEATURE_WEARABLE_SYNC=true
FEATURE_PUSH_NOTIFICATIONS=true

# =============================================================================
# Development & Testing
# =============================================================================

# Mock services for development
MOCK_AI_PROVIDERS=false
MOCK_EMAIL_SERVICE=true
MOCK_SMS_SERVICE=true

# Debug settings
DEBUG_MODE=false
ENABLE_API_DOCS=true

# =============================================================================
# Queue Configuration
# =============================================================================

# Bull Queue (Redis-based)
QUEUE_REDIS_URL=redis://localhost:6379
QUEUE_DASHBOARD_ENABLED=true
QUEUE_DASHBOARD_PORT=3001

# =============================================================================
# Cache Configuration
# =============================================================================

# Cache TTL settings (in seconds)
CACHE_USER_PROFILE_TTL=3600
CACHE_NUTRITION_DATA_TTL=86400
CACHE_AI_RESPONSES_TTL=7200

# =============================================================================
# Health Check Configuration
# =============================================================================

# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_EXTERNAL_APIS=false